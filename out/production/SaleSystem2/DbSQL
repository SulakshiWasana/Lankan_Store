DROP DATABASE IF EXISTS SaleSystem2;
CREATE DATABASE IF NOT EXISTS SaleSystem2;

SHOW DATABASES ;
USE SaleSystem2;

DROP TABLE IF EXISTS Customer;
CREATE TABLE IF NOT EXISTS Customer(
   ID VARCHAR(6),
   Title VARCHAR(5),
   Name VARCHAR(30) NOT NULL DEFAULT 'Unknown',
   Address TEXT,
   City VARCHAR(20),
   Province VARCHAR(20),
   PostalCode VARCHAR(9),
   CONSTRAINT PRIMARY KEY (ID)
);

SHOW TABLES ;
DESCRIBE Customer;

DROP TABLE IF EXISTS `Order`;
CREATE TABLE IF NOT EXISTS `Order`(
   OrderID VARCHAR(6),
   CID VARCHAR(15),
   OrderDate DATE,
   Cost DOUBLE,
   CONSTRAINT PRIMARY KEY (OrderID),
   CONSTRAINT FOREIGN KEY (CID) REFERENCES Customer(ID) ON DELETE CASCADE ON UPDATE CASCADE
);

SHOW TABLES ;
DESCRIBE `Order`;

DROP TABLE IF EXISTS Item;
CREATE TABLE IF NOT EXISTS Item (
   ItemCode VARCHAR(10),
   Description TEXT,
   PackSize VARCHAR(20),
   UnitPrice DOUBLE DEFAULT 0.0,
   QtyOnHand INT DEFAULT 0,
   CONSTRAINT PRIMARY KEY (ItemCode)
);

SHOW TABLES ;
DESCRIBE Item;

DROP TABLE IF EXISTS `Order Detail`;
CREATE TABLE IF NOT EXISTS `Order Detail`(
   ItemCode VARCHAR(6),
   OrderID VARCHAR(6),
   OrderQTY INT(11),
   UnitPrice DOUBLE,
   CONSTRAINT PRIMARY KEY (OrderID,ItemCode),
   CONSTRAINT FOREIGN KEY (ItemCode) REFERENCES Item(ItemCode) ON DELETE CASCADE ON UPDATE CASCADE,
   CONSTRAINT FOREIGN KEY (OrderID) REFERENCES `Order`(OrderID) ON DELETE CASCADE ON UPDATE CASCADE
);

SHOW TABLES ;
DESCRIBE `Order Detail`;
